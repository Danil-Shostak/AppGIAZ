<Window
    x:Class="EducationInstitutionsRB.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Grid Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
        <!-- Кастомный заголовок в стиле приложения -->
        <Grid x:Name="CustomTitleBar" 
              Height="40" 
              VerticalAlignment="Top"
              Background="{ThemeResource SystemControlBackgroundChromeMediumLowBrush}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- Логотип и название -->
            <StackPanel Grid.Column="0" 
                        Orientation="Horizontal" 
                        Spacing="12"
                        Margin="16,0"
                        VerticalAlignment="Center">
                <Border Background="{ThemeResource SystemAccentColor}"
                        CornerRadius="6"
                        Width="24" Height="24">
                    <TextBlock Text="&#xE8F1;" 
                              FontFamily="Segoe MDL2 Assets"
                              FontSize="12"
                              Foreground="White"
                              HorizontalAlignment="Center"
                              VerticalAlignment="Center"/>
                </Border>
                <TextBlock Text="Образовательные учреждения РБ" 
                          FontSize="13"
                          FontWeight="SemiBold"
                          VerticalAlignment="Center"
                          Foreground="{ThemeResource TextFillColorPrimaryBrush}"/>
            </StackPanel>

            <!-- Область для перетаскивания -->
            <Grid Grid.Column="1" 
                  Background="Transparent"
                  x:Name="DragRegion"/>

            <!-- Стильные кнопки управления -->
            <StackPanel Grid.Column="2" 
                        Orientation="Horizontal"
                        HorizontalAlignment="Right">
                <Button x:Name="MinimizeButton"
                        Content="&#xE921;"
                        FontFamily="Segoe MDL2 Assets"
                        FontSize="10"
                        Background="Transparent"
                        BorderThickness="0"
                        Width="40" Height="40"
                        Click="MinimizeButton_Click"
                        Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>

                <Button x:Name="MaximizeButton"
                        Content="&#xE922;"
                        FontFamily="Segoe MDL2 Assets"
                        FontSize="10"
                        Background="Transparent"
                        BorderThickness="0"
                        Width="40" Height="40"
                        Click="MaximizeButton_Click"
                        Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>

                <Button x:Name="CloseButton"
                        Content="&#xE8BB;"
                        FontFamily="Segoe MDL2 Assets"
                        FontSize="10"
                        Background="Transparent"
                        BorderThickness="0"
                        Width="40" Height="40"
                        Click="CloseButton_Click"
                        Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
            </StackPanel>
        </Grid>

        <!-- Основной контент -->
        <Grid Margin="0,40,0,0">
            <NavigationView 
                x:Name="RootNavigation"
                PaneDisplayMode="LeftCompact"
                IsBackButtonVisible="Collapsed"
                IsSettingsVisible="False"
                OpenPaneLength="240"
                CompactPaneLength="48"
                ItemInvoked="RootNavigation_ItemInvoked"
                Loaded="RootNavigation_Loaded"
                BackRequested="RootNavigation_BackRequested">

                <!-- Навигационные пункты с правильными стилями -->
                <NavigationView.MenuItems>
                    <NavigationViewItem Content="Обзор" Tag="Overview">
                        <NavigationViewItem.Icon>
                            <FontIcon Glyph="&#xE80F;"/>
                        </NavigationViewItem.Icon>
                    </NavigationViewItem>
                    <NavigationViewItem Content="Учреждения" Tag="Institutions">
                        <NavigationViewItem.Icon>
                            <FontIcon Glyph="&#xE8AF;"/>
                        </NavigationViewItem.Icon>
                    </NavigationViewItem>
                    <NavigationViewItem Content="Импорт данных" Tag="Import">
                        <NavigationViewItem.Icon>
                            <FontIcon Glyph="&#xE896;"/>
                        </NavigationViewItem.Icon>
                    </NavigationViewItem>
                    <NavigationViewItem Content="Отчеты" Tag="Reports">
                        <NavigationViewItem.Icon>
                            <FontIcon Glyph="&#xE9D2;"/>
                        </NavigationViewItem.Icon>
                    </NavigationViewItem>
                    <NavigationViewItem Content="Администрирование" Tag="Admin">
                        <NavigationViewItem.Icon>
                            <FontIcon Glyph="&#xE7EF;"/>
                        </NavigationViewItem.Icon>
                    </NavigationViewItem>
                </NavigationView.MenuItems>

                <!-- Контент страницы -->
                <Frame x:Name="ContentFrame" Background="Transparent"/>
            </NavigationView>
        </Grid>
    </Grid>
</Window>