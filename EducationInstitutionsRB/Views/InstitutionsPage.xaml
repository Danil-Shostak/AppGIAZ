<Page
    x:Class="EducationInstitutionsRB.Views.InstitutionsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:converters="using:EducationInstitutionsRB.Converters"
    mc:Ignorable="d">

    <Page.Resources>
        <converters:FormatConverter x:Key="FormatConverter"/>
        <converters:IntToStringConverter x:Key="IntToStringConverter"/>
    </Page.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- –ü–∞–Ω–µ–ª—å –ø–æ–∏—Å–∫–∞ -->
        <StackPanel Grid.Row="0" Padding="20" Spacing="10">
            <TextBlock Text="–ü–æ–∏—Å–∫ —É—á—Ä–µ–∂–¥–µ–Ω–∏–π" FontSize="18" FontWeight="Bold"/>
            <TextBox PlaceholderText="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é..." x:Name="SearchTextBox" TextChanged="SearchTextBox_TextChanged"/>

            <StackPanel Orientation="Horizontal" Spacing="10">
                <ComboBox Header="–û–±–ª–∞—Å—Ç—å" Width="200" x:Name="RegionCombo"
                          DisplayMemberPath="Name"
                          SelectionChanged="RegionCombo_SelectionChanged"/>

                <ComboBox Header="–†–∞–π–æ–Ω" Width="200" x:Name="DistrictCombo"
                          DisplayMemberPath="Name"
                          SelectionChanged="DistrictCombo_SelectionChanged"/>

                <ComboBox Header="–¢–∏–ø" Width="150" x:Name="TypeCombo"
                          SelectionChanged="TypeCombo_SelectionChanged">
                    <x:String>–®–∫–æ–ª–∞</x:String>
                    <x:String>–ì–∏–º–Ω–∞–∑–∏—è</x:String>
                    <x:String>–õ–∏—Ü–µ–π</x:String>
                    <x:String>–ö–æ–ª–ª–µ–¥–∂</x:String>
                    <x:String>–£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç</x:String>
                </ComboBox>

                <Button Content="‚ûï –î–æ–±–∞–≤–∏—Ç—å —É—á—Ä–µ–∂–¥–µ–Ω–∏–µ" Click="AddInstitutionButton_Click"
                        Background="#0078D4" Foreground="White" Padding="12,8"/>
            </StackPanel>
        </StackPanel>

        <!-- –°–ø–∏—Å–æ–∫ —É—á—Ä–µ–∂–¥–µ–Ω–∏–π -->
        <ListView
            Grid.Row="1"
            x:Name="InstitutionsList"
            SelectionMode="None">
            <ListView.ItemTemplate>
                <DataTemplate>
                    <Border BorderBrush="#E1E1E1" BorderThickness="0,0,0,1" Padding="0,8">
                        <Grid ColumnDefinitions="*,Auto" Margin="10,5">
                            <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —É—á—Ä–µ–∂–¥–µ–Ω–∏–∏ -->
                            <StackPanel Grid.Column="0" Spacing="4">
                                <TextBlock Text="{Binding Name}" FontWeight="SemiBold" FontSize="14"/>
                                <TextBlock Text="{Binding Type}" Foreground="Gray" FontSize="12"/>
                                <TextBlock Text="{Binding Address}" FontSize="12"/>
                                <TextBlock Text="{Binding District.Region.Name}" FontSize="11" Foreground="DarkGray"/>

                                <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä–æ–≤ -->
                                <StackPanel Orientation="Horizontal" Spacing="12" Margin="0,4,0,0">
                                    <TextBlock FontSize="11" Foreground="#0078D4">
                                        <Run Text="–£—á–µ–Ω–∏–∫–æ–≤: "/>
                                        <Run Text="{Binding StudentCount}"/>
                                    </TextBlock>
                                    <TextBlock FontSize="11" Foreground="#0078D4">
                                        <Run Text="–ü–µ—Ä—Å–æ–Ω–∞–ª: "/>
                                        <Run Text="{Binding StaffCount}"/>
                                    </TextBlock>
                                </StackPanel>
                            </StackPanel>

                            <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
                            <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="8" VerticalAlignment="Center">
                                <Button Content="‚úèÔ∏è" Click="EditButton_Click" 
                                        Tag="{Binding}"
                                        ToolTipService.ToolTip="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"
                                        Background="Transparent" BorderThickness="0"
                                        Padding="8,4" FontSize="12"/>

                                <Button Content="üóëÔ∏è" Click="DeleteButton_Click" 
                                        Tag="{Binding}"
                                        ToolTipService.ToolTip="–£–¥–∞–ª–∏—Ç—å"
                                        Background="Transparent" BorderThickness="0"
                                        Padding="8,4" FontSize="12"
                                        Foreground="#D13438"/>
                            </StackPanel>
                        </Grid>
                    </Border>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>
    </Grid>
</Page>